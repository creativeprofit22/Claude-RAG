<?xml version="1.0" encoding="UTF-8"?>
<!--
  InkEffects SVG Filters
  Library Skin V2: Typewriter Edition

  Provides paper-bleed, ink-spread, and wet-sheen filters
  for authentic ink visual language.
-->
<svg xmlns="http://www.w3.org/2000/svg" style="position: absolute; width: 0; height: 0;">
  <defs>
    <!--
      Paper Bleed Filter
      Feathers text edges into paper grain for organic ink absorption effect.
      Usage: filter="url(#paper-bleed-filter)"
    -->
    <filter id="paper-bleed-filter" x="-10%" y="-10%" width="120%" height="120%">
      <!-- Create paper grain texture -->
      <feTurbulence
        type="fractalNoise"
        baseFrequency="0.04"
        numOctaves="5"
        seed="15"
        result="grain"
      />

      <!-- Displacement for organic edges -->
      <feDisplacementMap
        in="SourceGraphic"
        in2="grain"
        scale="1.5"
        xChannelSelector="R"
        yChannelSelector="G"
        result="displaced"
      />

      <!-- Slight blur for bleed effect -->
      <feGaussianBlur
        in="displaced"
        stdDeviation="0.3"
        result="blurred"
      />

      <!-- Enhance contrast to maintain readability -->
      <feComponentTransfer in="blurred" result="enhanced">
        <feFuncA type="linear" slope="1.3" intercept="-0.1"/>
      </feComponentTransfer>

      <!-- Composite with original for sharper core -->
      <feMerge>
        <feMergeNode in="enhanced"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!--
      Ink Spread Filter
      Creates organic blob spreading for loading/error states.
      Usage: filter="url(#ink-spread-filter)"
    -->
    <filter id="ink-spread-filter" x="-50%" y="-50%" width="200%" height="200%">
      <!-- High-frequency noise for organic edges -->
      <feTurbulence
        type="turbulence"
        baseFrequency="0.02"
        numOctaves="3"
        seed="42"
        result="turbulence"
      />

      <!-- Strong displacement for irregular edges -->
      <feDisplacementMap
        in="SourceGraphic"
        in2="turbulence"
        scale="12"
        xChannelSelector="R"
        yChannelSelector="G"
        result="displaced"
      />

      <!-- Blur for soft ink spread -->
      <feGaussianBlur
        in="displaced"
        stdDeviation="2"
        result="spread"
      />

      <!-- Threshold to create ink-like edges -->
      <feComponentTransfer in="spread" result="inky">
        <feFuncA type="table" tableValues="0 0 0.3 0.7 1 1"/>
      </feComponentTransfer>

      <!-- Color adjustment to ink palette -->
      <feColorMatrix
        in="inky"
        type="matrix"
        values="0.1 0 0 0 0
                0.07 0 0 0 0
                0.03 0 0 0 0
                0 0 0 1 0"
        result="colored"
      />
    </filter>

    <!--
      Wet Sheen Filter
      Creates glossy wet ink appearance with subtle highlights.
      Usage: filter="url(#wet-sheen-filter)"
    -->
    <filter id="wet-sheen-filter" x="-5%" y="-5%" width="110%" height="110%">
      <!-- Specular lighting for wet sheen -->
      <feSpecularLighting
        in="SourceAlpha"
        surfaceScale="3"
        specularConstant="0.8"
        specularExponent="25"
        result="specular"
      >
        <fePointLight x="-100" y="-100" z="200"/>
      </feSpecularLighting>

      <!-- Composite specular with original -->
      <feComposite
        in="specular"
        in2="SourceAlpha"
        operator="in"
        result="specularMasked"
      />

      <!-- Blend modes for final appearance -->
      <feMerge>
        <feMergeNode in="SourceGraphic"/>
        <feMergeNode in="specularMasked"/>
      </feMerge>
    </filter>

    <!--
      Ink Drop Filter
      For loading drop animation with soft organic edges.
      Usage: filter="url(#ink-drop-filter)"
    -->
    <filter id="ink-drop-filter" x="-30%" y="-30%" width="160%" height="160%">
      <feTurbulence
        type="fractalNoise"
        baseFrequency="0.03"
        numOctaves="2"
        seed="7"
        result="noise"
      />

      <feDisplacementMap
        in="SourceGraphic"
        in2="noise"
        scale="4"
        xChannelSelector="R"
        yChannelSelector="G"
        result="organic"
      />

      <feGaussianBlur
        in="organic"
        stdDeviation="0.8"
        result="blurred"
      />

      <feComponentTransfer in="blurred">
        <feFuncA type="linear" slope="1.5" intercept="0"/>
      </feComponentTransfer>
    </filter>

    <!--
      Ink Swirl Filter
      For processing spinner with fluid motion blur.
      Usage: filter="url(#ink-swirl-filter)"
    -->
    <filter id="ink-swirl-filter" x="-20%" y="-20%" width="140%" height="140%">
      <feTurbulence
        type="turbulence"
        baseFrequency="0.01 0.02"
        numOctaves="2"
        seed="99"
        result="swirl"
      >
        <!-- Animated seed for motion - controlled via CSS/JS -->
      </feTurbulence>

      <feDisplacementMap
        in="SourceGraphic"
        in2="swirl"
        scale="6"
        xChannelSelector="R"
        yChannelSelector="B"
      />
    </filter>

    <!--
      Blotting Paper Filter
      For error recovery - absorbs/fades ink blot.
      Usage: filter="url(#blotting-filter)"
    -->
    <filter id="blotting-filter" x="-10%" y="-10%" width="120%" height="120%">
      <!-- Paper texture for absorption -->
      <feTurbulence
        type="fractalNoise"
        baseFrequency="0.1"
        numOctaves="6"
        seed="33"
        result="paper"
      />

      <!-- Multiply blend for absorption look -->
      <feBlend
        in="SourceGraphic"
        in2="paper"
        mode="multiply"
        result="absorbed"
      />

      <!-- Fade edges -->
      <feGaussianBlur
        in="absorbed"
        stdDeviation="1"
      />
    </filter>

    <!--
      Aged Ink Filter
      For disabled/faded states - simulates old document.
      Usage: filter="url(#aged-ink-filter)"
    -->
    <filter id="aged-ink-filter" x="0" y="0" width="100%" height="100%">
      <!-- Desaturate slightly -->
      <feColorMatrix
        type="saturate"
        values="0.6"
        result="desaturated"
      />

      <!-- Shift towards sepia -->
      <feColorMatrix
        in="desaturated"
        type="matrix"
        values="0.55 0.35 0.1 0 0
                0.45 0.35 0.1 0 0
                0.35 0.25 0.1 0 0
                0 0 0 0.7 0"
      />
    </filter>

    <!--
      Ink Wash Wipe Filter
      For page transitions - floods then recedes.
      Usage: filter="url(#ink-wash-filter)"
    -->
    <filter id="ink-wash-filter" x="-10%" y="-10%" width="120%" height="120%">
      <feTurbulence
        type="turbulence"
        baseFrequency="0.005"
        numOctaves="2"
        seed="88"
        result="wash"
      />

      <feDisplacementMap
        in="SourceGraphic"
        in2="wash"
        scale="20"
        xChannelSelector="R"
        yChannelSelector="G"
      />
    </filter>

    <!--
      Ink Pool Hover Filter
      Subtle pooling effect under cursor.
      Usage: filter="url(#ink-pool-filter)"
    -->
    <filter id="ink-pool-filter" x="-5%" y="-5%" width="110%" height="110%">
      <feGaussianBlur
        in="SourceGraphic"
        stdDeviation="1.5"
        result="pool"
      />

      <feComposite
        in="SourceGraphic"
        in2="pool"
        operator="over"
      />
    </filter>

    <!--
      Selection Highlight Filter
      Ink bleed-through effect for selected text.
      Usage: filter="url(#selection-bleed-filter)"
    -->
    <filter id="selection-bleed-filter" x="-5%" y="-5%" width="110%" height="110%">
      <!-- Slight blur for bleed-through -->
      <feGaussianBlur
        in="SourceGraphic"
        stdDeviation="0.5"
        result="bled"
      />

      <!-- Reduce opacity for see-through -->
      <feComponentTransfer in="bled">
        <feFuncA type="linear" slope="0.6" intercept="0"/>
      </feComponentTransfer>
    </filter>

  </defs>
</svg>
