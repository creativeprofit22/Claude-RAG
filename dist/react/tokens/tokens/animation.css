/**
 * The Curator - Animation Tokens
 * Refined, physical animations with scholarly gravitas
 *
 * Animation Philosophy:
 * - Subtle and purposeful, never flashy
 * - Physical metaphors (place-down, lift, settle)
 * - Consistent timing across the interface
 * - Progressive enhancement with @starting-style
 */

:root {
  /* =========================================
     Timing Durations
     ========================================= */
  --curator-duration-instant: 100ms;   /* Micro-interactions */
  --curator-duration-fast: 150ms;       /* Hovers, small changes */
  --curator-duration-normal: 250ms;     /* Standard transitions */
  --curator-duration-slow: 400ms;       /* Modals, page transitions */
  --curator-duration-slower: 600ms;     /* Complex animations */

  /* =========================================
     Easing Functions
     Natural, physical-feeling curves
     ========================================= */

  /* Out - Fast start, gentle end (most common) */
  --curator-ease-out: cubic-bezier(0.16, 1, 0.3, 1);

  /* In-Out - Smooth both ends */
  --curator-ease-in-out: cubic-bezier(0.45, 0, 0.55, 1);

  /* In - Gentle start, fast end (rare) */
  --curator-ease-in: cubic-bezier(0.4, 0, 1, 1);

  /* Bounce - Slight overshoot for playfulness */
  --curator-ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);

  /* Spring - Elastic feel */
  --curator-ease-spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);

  /* =========================================
     Standard Transitions
     Shorthand for common patterns
     ========================================= */
  --curator-transition-colors: color var(--curator-duration-fast) var(--curator-ease-out),
                                background-color var(--curator-duration-fast) var(--curator-ease-out),
                                border-color var(--curator-duration-fast) var(--curator-ease-out);

  --curator-transition-transform: transform var(--curator-duration-normal) var(--curator-ease-out);

  --curator-transition-opacity: opacity var(--curator-duration-fast) var(--curator-ease-out);

  --curator-transition-all: all var(--curator-duration-normal) var(--curator-ease-out);

  --curator-transition-shadow: box-shadow var(--curator-duration-normal) var(--curator-ease-out);
}

/* =========================================
   Keyframe Animations
   Physical, scholarly metaphors
   ========================================= */

/* Place Down - Like setting a book on a table */
@keyframes curator-place-down {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Fade In - Simple, dignified entrance */
@keyframes curator-fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Slide Up - Modal/panel entrance */
@keyframes curator-slide-up {
  from {
    opacity: 0;
    transform: translateY(16px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Scale In - Subtle zoom entrance */
@keyframes curator-scale-in {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Pulse - Soft attention indicator */
@keyframes curator-pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

/* Bounce - Typing indicator dots */
@keyframes curator-bounce {
  0%, 60%, 100% {
    transform: translateY(0);
  }
  30% {
    transform: translateY(-0.375rem);
  }
}

/* Skeleton pulse - Loading states */
@keyframes curator-skeleton {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.4;
  }
}

/* Spin - Loading spinner */
@keyframes curator-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* =========================================
   Exit Animations
   Paired with entrance animations
   ========================================= */

/* Fade Out - Simple, dignified exit */
@keyframes curator-fade-out {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

/* Slide Down - Modal/panel exit */
@keyframes curator-slide-down {
  from {
    opacity: 1;
    transform: translateY(0);
  }
  to {
    opacity: 0;
    transform: translateY(16px);
  }
}

/* Scale Out - Subtle zoom exit */
@keyframes curator-scale-out {
  from {
    opacity: 1;
    transform: scale(1);
  }
  to {
    opacity: 0;
    transform: scale(0.95);
  }
}

/* Shake - Error state feedback */
@keyframes curator-shake {
  0%, 100% {
    transform: translateX(0);
  }
  10%, 30%, 50%, 70%, 90% {
    transform: translateX(-4px);
  }
  20%, 40%, 60%, 80% {
    transform: translateX(4px);
  }
}

/* Glow pulse - Gold accent animation */
@keyframes curator-glow {
  0%, 100% {
    box-shadow: 0 0 0 0 var(--curator-gold-muted);
  }
  50% {
    box-shadow: 0 0 12px 4px var(--curator-gold-muted);
  }
}

/* =========================================
   @starting-style for CSS-only Entry Animations
   Progressive enhancement - gracefully ignored by older browsers
   ========================================= */

/* Message entry animation */
@supports (transition-behavior: allow-discrete) {
  .rag-message {
    transition: opacity var(--curator-duration-normal) var(--curator-ease-out),
                transform var(--curator-duration-normal) var(--curator-ease-out);
  }

  @starting-style {
    .rag-message {
      opacity: 0;
      transform: translateY(-8px);
    }
  }
}

/* Modal entry animation */
@supports (transition-behavior: allow-discrete) {
  .rag-preview-modal,
  .rag-confirm-dialog,
  .rag-upload-modal {
    transition: opacity var(--curator-duration-slow) var(--curator-ease-out),
                transform var(--curator-duration-slow) var(--curator-ease-out);
  }

  @starting-style {
    .rag-preview-modal,
    .rag-confirm-dialog,
    .rag-upload-modal {
      opacity: 0;
      transform: translateY(16px);
    }
  }
}

/* Card hover lift effect */
@supports (transition-behavior: allow-discrete) {
  .rag-doc-card {
    transition: transform var(--curator-duration-normal) var(--curator-ease-out),
                box-shadow var(--curator-duration-normal) var(--curator-ease-out),
                border-color var(--curator-duration-fast) var(--curator-ease-out);
  }
}

/* =========================================
   Utility Classes
   ========================================= */

.curator-animate-place-down {
  animation: curator-place-down var(--curator-duration-normal) var(--curator-ease-out);
}

.curator-animate-fade-in {
  animation: curator-fade-in var(--curator-duration-fast) var(--curator-ease-out);
}

.curator-animate-slide-up {
  animation: curator-slide-up var(--curator-duration-slow) var(--curator-ease-out);
}

.curator-animate-pulse {
  animation: curator-pulse 2s var(--curator-ease-in-out) infinite;
}

.curator-animate-spin {
  animation: curator-spin 1s linear infinite;
}

.curator-animate-skeleton {
  animation: curator-skeleton 1.5s var(--curator-ease-in-out) infinite;
}

.curator-animate-scale-in {
  animation: curator-scale-in var(--curator-duration-normal) var(--curator-ease-out);
}

.curator-animate-glow {
  animation: curator-glow 2s var(--curator-ease-in-out) infinite;
}

/* Exit animations */
.curator-animate-fade-out {
  animation: curator-fade-out var(--curator-duration-fast) var(--curator-ease-out) forwards;
}

.curator-animate-slide-down {
  animation: curator-slide-down var(--curator-duration-slow) var(--curator-ease-out) forwards;
}

.curator-animate-scale-out {
  animation: curator-scale-out var(--curator-duration-normal) var(--curator-ease-out) forwards;
}

/* Feedback animations */
.curator-animate-shake {
  animation: curator-shake var(--curator-duration-slow) cubic-bezier(0.36, 0.07, 0.19, 0.97);
}

.curator-animate-bounce {
  animation: curator-bounce 1.4s infinite ease-in-out;
}

/* Reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
